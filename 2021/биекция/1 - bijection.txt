<div class="top">
  <style>
    .top{
      height:2cm;
    }
    .body{
      width:16cm;
      margin:auto;
    }
    hr{
    	width:60%;
    }
  </style>
</div>

<div class="body">
< # <span class="title">Биекция</span>

<< Основано на подборке <br> Bijections от Yufie Zhao.

На прошлых уроках, когда мы смотрели на _Числа Каталана_, я говорил слово биекция, но что оно значило? Если говорить формально, то пусть есть два набора $\mathscr{A}$ и $\mathscr{B}$, _биекцией_ назовём соопоставление $f: ~ \mathscr{A} \mapsto \mathscr{B}$, такое что никаким двум элементам из $\mathscr{A}$ не соопоставляется один элемент из $\mathscr{B}$ и любому элементу из $\mathscr{B}$ соопоставлен элемент из $\mathscr{A}$. Это позволяет нам разбить все элементы из $\mathscr{A}$ и $\mathscr{B}$ на пары. В частности, если наборы не бесконечные, то $\abs{\mathscr{A}} = \abs{\mathscr{B}}$.

Это объяснение немного абстрактное, поэтому давайте посмотрим на конкретных примерах.

< <img src="/bijection.svg" width="300"></img>

**Пример<span style="color:white;">-</span>1.** Найдите число путей из $(0, 0)$ в $(n,m)$ идя только единичными шагами вверх и направо.
< <img src="/path.svg" width="300"></img><br>Пример путя из $(0,0)$ в $(5,4)$.

Идея биекции это трансформировать задачу в ту, что мы лучше знаем как посчитать. В этом случае, можно переписать путь как последовательность из $U$ и $R$, где $U$ &ndash; единичный сдвиг вверх, $R$ &ndash; единичный сдвиг вправо. Например, путь что указан выше можно записать как
$$RURRRUUUR.$$

Заметим, что в полученной последовательности будет $n$ букв $R$ и $m$ букв $U$, так как всего нужно $n$ шагов направо и $m$ шагов вверх чтобы добраться из $(0,0)$ в $(n,m)$. Так же, можно проверить что из любой последовательности из $n$ букв $R$ и $m$ букв $U$ можно получить путь. Следовательно, мы сделали биекцию между двумя следующими наборами:

<center>набор путей из $(0,0)$ в $(n,m)$ единичными шагами вверх и направо<br> 
$\updownarrow$<br>
набор последовательностей из $n$ букв $R$ и $m$ букв $U$.
</center>

Мы знаем как посчитать второй набор. В нем ровно $C ^ {\thinspace n} _ {n+m}$, что можно посчитать как количество способов выбрать $m$ мест для $R$ из последовательности длиной $n+m$. Поэтому число путей из $(0, 0)$ в $(n,m)$ идя только единичными шагами вверх и направо тоже $C ^ {\thinspace n} _ {n+m}$.
<span style="float:right;">$\square$</span>

<hr>


Пример выше показал как пользоваться биекцией. Обычно, доказательство биекции двух наборов $\mathscr{A}$ и $\mathscr{B}$ должно показать:

1. Как получить элемент  $\mathscr{B}$ из любого элемента $\mathscr{A}$.
1. Как восстановить элемент $\mathscr{A}$ из любого элемента $\mathscr{B}$.
1. Почему две выше указанные конструкции обратны друг другу.

Сможете ли вы заметить эти моменты в решении выше? Иногда, как в приведенном выше решении, после построения отображения $\mathscr{A} \mapsto \mathscr{B}$ (т.е. первого шага) легко построить обратное отображение. Однако бывают случаи, когда обратная конструкция совсем не очевидна.

Теперь давайте рассмотрим задачу на _разбиения_. Разбиения положительного целого числа $n$ &ndash; это способ записать $n$ как сумму натуральных чисел, где порядок слагаемых не имеет значения, хотя обычно мы пишем слагаемые в порядке невозрастания. Например, у числа 4 ровно пять разбиений:

$$\begin{aligned}
4&=1+1+1+1 \\
4&=2+1+1 \\
4&=2+2 \\
4&=3+1\\
4&=4
\end{aligned}$$

Мы также запишем разбиение как неубывающие наборы, поэтому разбиения 4
обозначаются $(1, 1, 1, 1)$, $(2, 1, 1)$, $(2, 2)$, $(3, 1)$, $(4)$.

**Пример<span style="color:white;">-</span>2.** Пусть $n$ и $k$ &ndash; положительные целые числа. Показажите, что число разбиений $n$ на ровно $k$ слагаемых, равно числу разбиений $n$ наибольшее слагаемое которых равна $k$.

Для решения этого примера попробуем визуализировать его. Каждое разбиение $n = a_1 + a_2 + \ldots + a_r$, где $a_1 \ge a_2 \ge \ldots \ge a_r > 0$, рассмотримка диаграмму с $a_i$ точками в $i$-том ряду. Например, разбиение $15 = 5+3+3+2+1+1$ соответвтсует следующей диаграмме:

< <img src="/ex1.svg" width="80"/>

Ключевая идея это то, что существует биекция между такой диаграммой с $n$ точками и разбиениями числа $n$. Число слагаемых в разбиение соответствует числу рядов в диаграмме и наибольшее слагаемое в разбиение соответствует числу колонок в диаграмме.
~Для каждого разбиения рассмотрим ему _сопряженное_, диаграмма которого получается путем отражения оригинальной диаграммы относительно главной диагонали. Пример двух сопряженных диаграмм:
< <img src="/ex2.svg" width="100"/> &nbsp;&nbsp;&nbsp;<img src="/ex3.svg" height="125"/>
Заметим, что операция сопряжения меняет местами число рядов и столбцов в диаграмме. В частности, мы получаем биекцию между числом диаграмм с $k$ рядами и числом диаграм с $k$ столбцами, откуда мы получаем биекцию между наборами разбиений $n$ на ровно $k$ слагаемых и наборами разбиений $n$ наибольшее слагаемое которых равна $k$. <span style="float:right;">$\square$</span>

<hr>

< Вот классика о разбиениях открытая Эйлером.

**Пример<span style="color:white;">-</span>3.** Докажите, что число разбиений $n$ на различные слагаемые равно количество разбиений $n$ на нечетные слагаемые.

Мы проведем биекцию между разбиениями $n$ на различные слагаемые и разбиениями $n$ на нечетные слагаемые.

Начнем с разбиения $n$ на различные слагаемые, запишем каждое **слагаемое** числа $n$ как $a \cdot 2^b$, где $a$ нечетное и затем разделим слагаемое на $2^b$ слагаемых равных $a$. Это даёт разбиения числа $n$ на нечетные слагаемые. Например, начнем с разбиения 30 на (12, 7, 6, 4, 1), тогда получим
$$\begin{aligned}
30 = & \thinspace
12 + 7 + 6 + 4 + 1 \\
= & \thinspace
3 \cdot 2^2 + 7 \cdot 2^0 + 3 \cdot 2^1 + 1 \cdot 2^2 + 1 \cdot 2^0 \\
= & \thinspace
(3 + 3 + 3 + 3) + 7 + (3 + 3) + (1 + 1 + 1 + 1) + 1 \\
= & \thinspace
7 + 3 + 3 + 3 + 3 + 3 + 3 + 1 + 1 + 1 + 1 + 1.
\end{aligned}$$

Получили разбиение $(7, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1)$ с нечетными слагаемыми. Для обратной операции, мы начнем с разбиения $n$ на нечетные части. Пусть $k$ слагаемых равны $a$, где $a$ нечетный, и пусть $k = 2^{k_1} + 2^{k_2} + \ldots + 2^{k_r}$ для различных натуральных $k_1, k_2, \ldots , k_r$ (это тоже самое что и представление $k$ в двоичной системе). Далее создадим слагаемые вида $a \cdot 2^{k_i}$ для каждого $i$. Заметьте что полученные слагаемые все различные, так как каждое число можно единственным образом представить в виде $a \cdot 2^b$ где $a$ нечетное. Например, начиная с разбиения $(7, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1)$ числа 30, мы получим:

$$\begin{aligned}
30 =& \thinspace 7 + 3 + 3 + 3 + 3 + 3 + 3 + 1 + 1 + 1 + 1 + 1 \\
=& \thinspace 7 \cdot 1 + 3 \cdot 6 + 1 \cdot 5 \\
=& \thinspace 7 \cdot 2^0 + 3 \cdot(2^2 + 2^1) + 1 \cdot(2^2 + 2^0) \\
=& \thinspace 7 \cdot 2^0 + 3 \cdot 2^2 + 3 \cdot 2^1 + 1 \cdot 2^2 + 1 \cdot 2^0 \\
=& \thinspace 7 + 12 + 6 + 4 + 1 \\
=& \thinspace 12 + 7 + 6 + 4 + 1.
\end{aligned}$$

То есть мы обратно получаем $(12, 7, 6, 4, 1)$. Попробуйте сами понять почему каждая конструкция обратно другой. И на этом мы показали, что количество разбиений $n$ на различные слагаемые и разбиений $n$ на нечетные слагаемые одинаково. <span style="float:right;">$\square$</span>


<hr>

<br>
<br>

**Задачи для самостоятельного решения**

1. Пусть $n$ натуральное число. Сколькими способами можно представить $n$ как сумму хотя бы двух натуральных чисел? Наборы записанные в разных порядках разные. (Например, если $n=3$ то всего 3 способа предстваить $3 = 1+2 = 2+1 = 1+1+1$.)

2. Даны натуральные числа $m$ и $n$. Найдите количество наборов $(x_1, x_2, \ldots, x_m)$ натуральных чисел таких, что $x_1+x_2+\ldots+x_m = n$.

3. Даны натуральные числа $m$ и $n$. Найдите количество наборов $(x_1, x_2, \ldots, x_m)$ неотрицательных чисел таких, что $x_1+x_2+\ldots+x_m = n$. (Подсказка: сможете найти биекцию с предыдущей задачей?)

4.  Дана треугольная сетка полученная путем укладки равностороннего треугольника со стороной
$n$ равносторонними треугольниками со стороной 1 (всего их $n^2$). Определите количество параллелограммов ограниченных отрезками сетки.

< <img src="https://i.stack.imgur.com/tgaco.png"/>

</div>